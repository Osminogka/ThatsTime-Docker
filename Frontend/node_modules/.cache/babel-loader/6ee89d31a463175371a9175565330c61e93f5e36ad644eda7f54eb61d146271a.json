{"ast":null,"code":"import { ref, reactive, watch, onMounted, computed } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { getRecordsWithGroup } from '../core/userRecords';\nimport RecordCard from '@/view/RecordCard.vue';\nimport LoadingAnimation from '@/view/LoadingAnimation.vue';\nimport { friendList } from '@/core/userInfo';\nimport { inviteFriendToGroup, removeMemberFromGroup, promoteMemberInGroup, demoteMemberInGroup } from '../core/groupInfo';\nexport default {\n  __name: 'MoreGroup',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    import('../assets/css/loadingAnimation.css');\n    const route = useRoute();\n    const infoAboutGroup = reactive({\n      isMember: true,\n      isCreator: false,\n      Creator: '',\n      members: [],\n      records: []\n    });\n    const error = ref(null);\n    const loading = ref(false);\n    const groupName = ref(route.params.groupname);\n    onMounted(async () => {\n      await fetchData();\n    });\n    watch(() => route.params.groupname, async groupname => {\n      groupName.value = groupname;\n      await fetchData();\n    });\n    async function fetchData() {\n      error.value = null;\n      loading.value = true;\n      try {\n        let newData = await getRecordsWithGroup(route.params.groupname);\n\n        // Clear the current object\n        for (let key in infoAboutGroup) {\n          delete infoAboutGroup[key];\n        }\n        // Add new properties\n        for (let key in newData) {\n          infoAboutGroup[key] = newData[key];\n        }\n      } catch (e) {\n        error.value = e;\n      } finally {\n        loading.value = false;\n      }\n    }\n    const lastMember = computed(() => infoAboutGroup.members[infoAboutGroup.members.length - 1]);\n    const friendToInvite = ref([...friendList.value]);\n    const lastToInvite = computed(() => friendToInvite.value[friendToInvite.value.length - 1].name);\n    async function removeMember(memberName) {\n      await removeMemberFromGroup(memberName);\n    }\n    async function inviteToGroup(friendName) {\n      await inviteFriendToGroup(friendName);\n      friendToInvite.value = friendToInvite.value.filter(friend => friend.name !== friendName);\n    }\n    async function promoteMember(memberName) {\n      await promoteMemberInGroup(memberName);\n    }\n    async function demoteMember(memberName) {\n      await demoteMemberInGroup(memberName);\n    }\n    const __returned__ = {\n      route,\n      infoAboutGroup,\n      error,\n      loading,\n      groupName,\n      fetchData,\n      lastMember,\n      friendToInvite,\n      lastToInvite,\n      removeMember,\n      inviteToGroup,\n      promoteMember,\n      demoteMember,\n      ref,\n      reactive,\n      watch,\n      onMounted,\n      computed,\n      get useRoute() {\n        return useRoute;\n      },\n      get getRecordsWithGroup() {\n        return getRecordsWithGroup;\n      },\n      RecordCard,\n      LoadingAnimation,\n      get friendList() {\n        return friendList;\n      },\n      get inviteFriendToGroup() {\n        return inviteFriendToGroup;\n      },\n      get removeMemberFromGroup() {\n        return removeMemberFromGroup;\n      },\n      get promoteMemberInGroup() {\n        return promoteMemberInGroup;\n      },\n      get demoteMemberInGroup() {\n        return demoteMemberInGroup;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","reactive","watch","onMounted","computed","useRoute","getRecordsWithGroup","RecordCard","LoadingAnimation","friendList","inviteFriendToGroup","removeMemberFromGroup","promoteMemberInGroup","demoteMemberInGroup","route","infoAboutGroup","isMember","isCreator","Creator","members","records","error","loading","groupName","params","groupname","fetchData","value","newData","key","e","lastMember","length","friendToInvite","lastToInvite","name","removeMember","memberName","inviteToGroup","friendName","filter","friend","promoteMember","demoteMember"],"sources":["/home/osminogka/Desktop/Programming/ThatsTime/vueapp/src/components/MoreGroup.vue"],"sourcesContent":["<script setup>\nimport('../assets/css/loadingAnimation.css');\n\nimport { ref, reactive, watch, onMounted, computed } from 'vue';\nimport { useRoute } from 'vue-router';\n\nimport { getRecordsWithGroup } from '../core/userRecords';\n\nimport RecordCard from '@/view/RecordCard.vue';\nimport LoadingAnimation from '@/view/LoadingAnimation.vue';\nimport { friendList } from '@/core/userInfo';\nimport { inviteFriendToGroup, removeMemberFromGroup, promoteMemberInGroup, demoteMemberInGroup } from '../core/groupInfo'\n\nconst route = useRoute();\n\nconst infoAboutGroup = reactive({\n    isMember: true,\n    isCreator: false,\n    Creator: '',\n    members: [],\n    records: []\n});\nconst error = ref(null);\nconst loading = ref(false);\n\nconst groupName = ref(route.params.groupname);\n\nonMounted(async () => {\n    await fetchData();\n});\n\nwatch(() => route.params.groupname, async (groupname) =>{\n    groupName.value = groupname;\n    await fetchData();\n    }\n);\n\nasync function fetchData() {\n    error.value = null;\n    loading.value = true;\n    try{\n        let newData = await getRecordsWithGroup(route.params.groupname);\n\n        // Clear the current object\n        for (let key in infoAboutGroup) {\n            delete infoAboutGroup[key];\n        }\n        // Add new properties\n        for (let key in newData) {\n            infoAboutGroup[key] = newData[key];\n        }\n    } catch (e) {\n        error.value = e;\n    }finally{\n        loading.value = false;\n    }\n}\n\nconst lastMember = computed(() => infoAboutGroup.members[infoAboutGroup.members.length - 1]);\n\nconst friendToInvite = ref([...friendList.value])\n\nconst lastToInvite = computed(() => friendToInvite.value[friendToInvite.value.length - 1].name);\n\nasync function removeMember(memberName){\n    await removeMemberFromGroup(memberName);\n}\n\nasync function inviteToGroup(friendName){\n    await inviteFriendToGroup(friendName);\n    friendToInvite.value = friendToInvite.value.filter(friend => friend.name !== friendName);\n}\n\nasync function promoteMember(memberName){\n    await promoteMemberInGroup(memberName);\n}\n\nasync function demoteMember(memberName){\n    await demoteMemberInGroup(memberName);\n}\n</script>\n\n<template>\n    <div class=\"group-info-container\">\n        <div v-if=\"error\">\n            <p>{{ error }}</p>\n        </div>\n        <loading-animation v-else-if=\"loading\" />\n        <div v-else-if=\"infoAboutGroup.isMember\">\n            <div class=\"friend-info-header\">{{ route.params.groupname }}</div>\n            <div class=\"info-header\">Created by: {{ infoAboutGroup.Creator }}</div>\n            <div class=\"info-header\">Members</div>\n            <div class=\"social-action-container\">\n                <div class=\"members-container\">\n                    <div v-for=\"(member, index) in infoAboutGroup.members\" \n                        :class=\"{'member-enitity': member !== lastMember,'member-enitity-last': member === lastMember}\" :key=\"index\">\n                        <p>{{ member }}</p>\n                        <div v-if=\"infoAboutGroup.isCreator\">\n                            <button class=\"remove-friend-button custom-button\" @click=\"removeMember(member)\" />\n                            <button class=\"promote-member\" @click=\"promoteMember(member)\"/>\n                            <button class=\"demote-member\" @click=\"demoteMember(member)\" />\n                        </div>\n                    </div>\n                </div>\n                <div class=\"members-container\">\n                    <div :class=\"{'member-enitity': member !== lastToInvite,'member-enitity-last': member === lastToInvite}\" v-for=\"(friend, index) in friendToInvite\" :key=\"index\">\n                        <p>{{ friend.name }}</p>\n                        <button class=\"invite-friend-button custom-button\" @click=\"inviteToGroup(friend.name)\" />\n                    </div>\n                </div>\n            </div>\n            <div v-if=\"infoAboutGroup.records.length === 0\">\n                <p>There are no records yet</p>\n            </div>\n            <div v-else>\n                <record-card v-for=\"(record, index) in infoAboutGroup.records\" :key=\"index\" :record=\"record\" />\n            </div>\n        </div>\n        <div v-if=\"!infoAboutGroup.isMember\">\n            <h1 class=\"not-your-friend\">You are not member of such group</h1>\n        </div>\n    </div>\n</template>\n\n<style scoped>\n\n.group-info-container{\n    display: flex;\n    flex-direction: column;\n    padding: 20px;\n}\n\n.members-container{\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    margin-top: 10px;\n    align-items: stretch;\n    border: 5px solid black;\n    border-radius: 5px;\n    background-color: white;\n    padding-left: 10px;\n    font-size: 1.2em;\n    padding-right: 10px;\n    max-height: 250px;\n    overflow-y: auto;\n    max-width: 40%;\n}\n\n.social-action-container{\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n}\n\n.invite-friend-button{\n    background-image: url('../assets/svg/Social/sendgroupinvite.svg');\n    background-color: white;\n}\n\n.friend-info-header{\n    font-size: 24px;\n    font-weight: bold;\n    margin-bottom: 20px;\n}\n\n.not-your-friend{\n    font-size: 24px;\n    font-weight: bold;\n    margin-bottom: 20px;\n    text-align: center;\n}\n\n.member-enitity{\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1px solid black;\n    margin-top: 10px;\n    padding-left: 10px;\n    padding-right: 10px;\n}\n\n.member-enitity-last{\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border: none;\n    margin-top: 10px;\n    padding-left: 10px;\n    padding-right: 10px;\n}\n\n.info-header{\n    font-size: 1.2em;\n    font-family: 'Brush Script MT', cursive;\n    font-weight: bold;\n}\n\n.remove-friend-button{\n    background-image: url('../assets/svg/Profile/bin.svg');\n    background-color: white;\n    padding: 5px;\n    margin-left: 20px;\n    margin-right: 10px;\n}\n\n.custom-button{\n    background-position: center;\n    background-size:contain;\n    background-repeat: no-repeat;\n    border: none;\n    cursor: pointer;\n    height: 2em;\n    width: 2em;\n}\n\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}