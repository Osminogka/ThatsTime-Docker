{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createBlock as _createBlock, renderList as _renderList, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-f64551fa\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  key: 0\n};\nconst _hoisted_2 = {\n  key: 2\n};\nconst _hoisted_3 = {\n  class: \"friend-info-header\"\n};\nconst _hoisted_4 = {\n  key: 0\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"There are no records yet\", -1 /* HOISTED */));\nconst _hoisted_6 = [_hoisted_5];\nconst _hoisted_7 = {\n  key: 1\n};\nconst _hoisted_8 = {\n  key: 3\n};\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"not-your-friend\"\n}, \"You don't have such friend\", -1 /* HOISTED */));\nconst _hoisted_10 = [_hoisted_9];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [$setup.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"p\", null, _toDisplayString($setup.error), 1 /* TEXT */)])) : $setup.loading ? (_openBlock(), _createBlock($setup[\"LoadingAnimation\"], {\n    key: 1\n  })) : $setup.infoAboutFriend.isFriend ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, _toDisplayString($setup.route.params.nickname), 1 /* TEXT */), $setup.infoAboutFriend.records.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [..._hoisted_6])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.infoAboutFriend.records, (record, index) => {\n    return _openBlock(), _createBlock($setup[\"RecordCard\"], {\n      key: index,\n      record: record\n    }, null, 8 /* PROPS */, [\"record\"]);\n  }), 128 /* KEYED_FRAGMENT */))]))])) : _createCommentVNode(\"v-if\", true), !$setup.infoAboutFriend.isFriend ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [..._hoisted_10])) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["key","class","_createElementVNode","_hoisted_5","_hoisted_9","_createElementBlock","_Fragment","$setup","error","_hoisted_1","_toDisplayString","loading","_createBlock","infoAboutFriend","isFriend","_hoisted_2","_hoisted_3","route","params","nickname","records","length","_hoisted_4","_hoisted_6","_hoisted_7","_renderList","record","index","_createCommentVNode","_hoisted_8","_hoisted_10"],"sources":["/home/osminogka/Desktop/Programming/ThatsTime/vueapp/src/components/MoreFriend.vue"],"sourcesContent":["<script setup>\nimport('../assets/css/loadingAnimation.css');\n\nimport { ref, reactive, watch, onMounted } from 'vue';\nimport { useRoute } from 'vue-router';\n\nimport { getRecordsWithFriend } from '../core/userRecords';\n\nimport RecordCard from '@/view/RecordCard.vue';\nimport LoadingAnimation from '@/view/LoadingAnimation.vue';\n\nconst route = useRoute();\n\nconst infoAboutFriend = reactive({\n    isFriend: true,\n    records: []\n});\nconst error = ref(null);\nconst loading = ref(false);\n\nconst friendNickname = ref(route.params.nickname);\n\nonMounted(async () => {\n    await fetchData();\n});\n\nwatch(() => route.params.nickname, async (nickname) =>{\n    friendNickname.value = nickname;\n    await fetchData();\n    }\n);\n\nasync function fetchData() {\n    error.value = null;\n    loading.value = true;\n    try{\n        let newData = await new Promise((resolve, reject) => {\n            setTimeout(async () => {\n                try {\n                    const data = await getRecordsWithFriend(route.params.nickname);\n                    resolve(data);\n                } catch (e) {\n                    reject(e);\n                }\n            }, 2000); // 2000 ms delay\n        });\n        // Clear the current object\n        for (let key in infoAboutFriend) {\n            delete infoAboutFriend[key];\n        }\n        // Add new properties\n        for (let key in newData) {\n            infoAboutFriend[key] = newData[key];\n        }\n    } catch (e) {\n        error.value = e;\n    }finally{\n        loading.value = false;\n    }\n}\n</script>\n\n<template>\n    <div v-if=\"error\">\n        <p>{{ error }}</p>\n    </div>\n    <loading-animation v-else-if=\"loading\" />\n    <div v-else-if=\"infoAboutFriend.isFriend\">\n        <div class=\"friend-info-header\">{{ route.params.nickname }}</div>\n        <div v-if=\"infoAboutFriend.records.length === 0\">\n            <p>There are no records yet</p>\n        </div>\n        <div v-else>\n            <record-card v-for=\"(record, index) in infoAboutFriend.records\" :key=\"index\" :record=\"record\" />\n        </div>\n    </div>\n    <div v-if=\"!infoAboutFriend.isFriend\">\n        <h1 class=\"not-your-friend\">You don't have such friend</h1>\n    </div>\n</template>\n\n<style scoped>\n\n.friend-info-header{\n    font-size: 24px;\n    font-weight: bold;\n    margin-bottom: 20px;\n}\n\n.not-your-friend{\n    font-size: 24px;\n    font-weight: bold;\n    margin-bottom: 20px;\n    text-align: center;\n}\n\n</style>"],"mappings":";;;EAAAA,GAAA;AAAA;;EAAAA,GAAA;AAAA;;EAoEaC,KAAK,EAAC;AAAoB;;EApEvCD,GAAA;AAAA;gEAsEYE,mBAAA,CAA+B,WAA5B,0BAAwB;oBAA3BC,UAA+B,C;;EAtE3CH,GAAA;AAAA;;EAAAA,GAAA;AAAA;gEA6EQE,mBAAA,CAA2D;EAAvDD,KAAK,EAAC;AAAiB,GAAC,4BAA0B;qBAAtDG,UAA2D,C;;uBA7EnEC,mBAAA,CAAAC,SAAA,SA+DeC,MAAA,CAAAC,KAAK,I,cAAhBH,mBAAA,CAEM,OAjEVI,UAAA,GAgEQP,mBAAA,CAAkB,WAAAQ,gBAAA,CAAZH,MAAA,CAAAC,KAAK,iB,KAEeD,MAAA,CAAAI,OAAO,I,cAArCC,YAAA,CAAyCL,MAAA;IAlE7CP,GAAA;EAAA,MAmEoBO,MAAA,CAAAM,eAAe,CAACC,QAAQ,I,cAAxCT,mBAAA,CAQM,OA3EVU,UAAA,GAoEQb,mBAAA,CAAiE,OAAjEc,UAAiE,EAAAN,gBAAA,CAA9BH,MAAA,CAAAU,KAAK,CAACC,MAAM,CAACC,QAAQ,kBAC7CZ,MAAA,CAAAM,eAAe,CAACO,OAAO,CAACC,MAAM,U,cAAzChB,mBAAA,CAEM,OAvEdiB,UAAA,MAAAC,UAAA,O,cAwEQlB,mBAAA,CAEM,OA1EdmB,UAAA,I,kBAyEYnB,mBAAA,CAAgGC,SAAA,QAzE5GmB,WAAA,CAyEmDlB,MAAA,CAAAM,eAAe,CAACO,OAAO,EAzE1E,CAyEiCM,MAAM,EAAEC,KAAK;yBAAlCf,YAAA,CAAgGL,MAAA;MAA/BP,GAAG,EAAE2B,KAAK;MAAGD,MAAM,EAAEA;;yCAzElGE,mBAAA,gB,CA4EgBrB,MAAA,CAAAM,eAAe,CAACC,QAAQ,I,cAApCT,mBAAA,CAEM,OA9EVwB,UAAA,MAAAC,WAAA,MAAAF,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}