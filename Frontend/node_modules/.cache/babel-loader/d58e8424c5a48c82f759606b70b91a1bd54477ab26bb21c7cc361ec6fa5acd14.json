{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createBlock as _createBlock, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-f42b29ac\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"group-info-container\"\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  key: 2\n};\nconst _hoisted_4 = {\n  class: \"friend-info-header\"\n};\nconst _hoisted_5 = {\n  class: \"info-header\"\n};\nconst _hoisted_6 = {\n  class: \"social-action-container\"\n};\nconst _hoisted_7 = {\n  class: \"members-container\"\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"info-social-header\"\n}, \"Members\", -1 /* HOISTED */));\nconst _hoisted_9 = {\n  key: 0\n};\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = {\n  class: \"members-container\"\n};\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"info-social-header\"\n}, \"Invite\", -1 /* HOISTED */));\nconst _hoisted_15 = [\"onClick\"];\nconst _hoisted_16 = {\n  key: 0\n};\nconst _hoisted_17 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"There are no records yet\", -1 /* HOISTED */));\nconst _hoisted_18 = [_hoisted_17];\nconst _hoisted_19 = {\n  key: 1\n};\nconst _hoisted_20 = {\n  key: 3\n};\nconst _hoisted_21 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"not-your-friend\"\n}, \"You are not member of such group\", -1 /* HOISTED */));\nconst _hoisted_22 = [_hoisted_21];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$setup.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"p\", null, _toDisplayString($setup.error), 1 /* TEXT */)])) : $setup.loading ? (_openBlock(), _createBlock($setup[\"LoadingAnimation\"], {\n    key: 1\n  })) : $setup.infoAboutGroup.isMember ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, _toDisplayString($setup.route.params.groupname), 1 /* TEXT */), _createElementVNode(\"button\", {\n    class: \"group-show-info-button\",\n    onClikc: _cache[0] || (_cache[0] = $event => _ctx.showGroupInfo())\n  }, null, 32 /* NEED_HYDRATION */), _createElementVNode(\"div\", _hoisted_5, \"Created by: \" + _toDisplayString($setup.infoAboutGroup.Creator), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_hoisted_8, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.infoAboutGroup.members, (member, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: _normalizeClass({\n        'member-enitity': member !== $setup.lastMember,\n        'member-enitity-last': member === $setup.lastMember\n      }),\n      key: index\n    }, [_createElementVNode(\"p\", null, _toDisplayString(member), 1 /* TEXT */), $setup.infoAboutGroup.isCreator ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createElementVNode(\"button\", {\n      class: \"promote-member\",\n      onClick: $event => $setup.promoteMember(member)\n    }, null, 8 /* PROPS */, _hoisted_10), _createElementVNode(\"button\", {\n      class: \"demote-member\",\n      onClick: $event => $setup.demoteMember(member)\n    }, null, 8 /* PROPS */, _hoisted_11), _createElementVNode(\"button\", {\n      class: \"remove-friend-button custom-button\",\n      onClick: $event => $setup.removeMember(member)\n    }, null, 8 /* PROPS */, _hoisted_12)])) : _createCommentVNode(\"v-if\", true)], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_13, [_hoisted_14, (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.friendToInvite, (friend, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: _normalizeClass({\n        'member-enitity': _ctx.member !== $setup.lastToInvite,\n        'member-enitity-last': _ctx.member === $setup.lastToInvite\n      }),\n      key: index\n    }, [_createElementVNode(\"p\", null, _toDisplayString(friend.name), 1 /* TEXT */), _createElementVNode(\"button\", {\n      class: \"invite-friend-button custom-button\",\n      onClick: $event => $setup.inviteToGroup(friend.name)\n    }, null, 8 /* PROPS */, _hoisted_15)], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */))])]), $setup.infoAboutGroup.records.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_16, [..._hoisted_18])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_19, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.infoAboutGroup.records, (record, index) => {\n    return _openBlock(), _createBlock($setup[\"RecordCard\"], {\n      key: index,\n      record: record\n    }, null, 8 /* PROPS */, [\"record\"]);\n  }), 128 /* KEYED_FRAGMENT */))]))])) : _createCommentVNode(\"v-if\", true), !$setup.infoAboutGroup.isMember ? (_openBlock(), _createElementBlock(\"div\", _hoisted_20, [..._hoisted_22])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","key","_createElementVNode","_hoisted_17","_hoisted_21","_createElementBlock","_hoisted_1","$setup","error","_hoisted_2","_toDisplayString","loading","_createBlock","infoAboutGroup","isMember","_hoisted_3","_hoisted_4","route","params","groupname","onClikc","_cache","$event","_ctx","showGroupInfo","_hoisted_5","Creator","_hoisted_6","_hoisted_7","_hoisted_8","_Fragment","_renderList","members","member","index","_normalizeClass","lastMember","isCreator","_hoisted_9","onClick","promoteMember","_hoisted_10","demoteMember","_hoisted_11","removeMember","_hoisted_12","_createCommentVNode","_hoisted_13","_hoisted_14","friendToInvite","friend","lastToInvite","name","inviteToGroup","_hoisted_15","records","length","_hoisted_16","_hoisted_18","_hoisted_19","record","_hoisted_20","_hoisted_22"],"sources":["/home/osminogka/Desktop/Programming/ThatsTime/vueapp/src/components/MoreGroup.vue"],"sourcesContent":["<script setup>\nimport('../assets/css/loadingAnimation.css');\n\nimport { ref, reactive, watch, onMounted, computed } from 'vue';\nimport { useRoute } from 'vue-router';\n\nimport { getRecordsWithGroup } from '../core/userRecords';\n\nimport RecordCard from '@/view/RecordCard.vue';\nimport LoadingAnimation from '@/view/LoadingAnimation.vue';\nimport { friendList } from '@/core/userInfo';\nimport { inviteFriendToGroup, removeMemberFromGroup, promoteMemberInGroup, demoteMemberInGroup } from '../core/groupInfo'\n\nconst route = useRoute();\n\nconst infoAboutGroup = reactive({\n    isMember: true,\n    isCreator: false,\n    Creator: '',\n    members: [],\n    records: []\n});\nconst error = ref(null);\nconst loading = ref(false);\n\nconst groupName = ref(route.params.groupname);\n\nonMounted(async () => {\n    await fetchData();\n});\n\nwatch(() => route.params.groupname, async (groupname) =>{\n    groupName.value = groupname;\n    await fetchData();\n    }\n);\n\nasync function fetchData() {\n    error.value = null;\n    loading.value = true;\n    try{\n        let newData = await getRecordsWithGroup(route.params.groupname);\n\n        // Clear the current object\n        for (let key in infoAboutGroup) {\n            delete infoAboutGroup[key];\n        }\n        // Add new properties\n        for (let key in newData) {\n            infoAboutGroup[key] = newData[key];\n        }\n    } catch (e) {\n        error.value = e;\n    }finally{\n        loading.value = false;\n    }\n}\n\nconst lastMember = computed(() => infoAboutGroup.members[infoAboutGroup.members.length - 1]);\n\nconst friendToInvite = ref([...friendList.value])\n\nconst lastToInvite = computed(() => friendToInvite.value[friendToInvite.value.length - 1].name);\n\nasync function removeMember(memberName){\n    await removeMemberFromGroup(memberName);\n}\n\nasync function inviteToGroup(friendName){\n    await inviteFriendToGroup(friendName);\n    friendToInvite.value = friendToInvite.value.filter(friend => friend.name !== friendName);\n}\n\nasync function promoteMember(memberName){\n    await promoteMemberInGroup(memberName);\n}\n\nasync function demoteMember(memberName){\n    await demoteMemberInGroup(memberName);\n}\n</script>\n\n<template>\n    <div class=\"group-info-container\">\n        <div v-if=\"error\">\n            <p>{{ error }}</p>\n        </div>\n        <loading-animation v-else-if=\"loading\" />\n        <div v-else-if=\"infoAboutGroup.isMember\">\n            <div class=\"friend-info-header\">{{ route.params.groupname }}</div>\n            <button class=\"group-show-info-button\" @clikc=\"showGroupInfo()\" />\n            <div class=\"info-header\">Created by: {{ infoAboutGroup.Creator }}</div>\n            <div class=\"social-action-container\">\n                <div class=\"members-container\">\n                    <div class=\"info-social-header\">Members</div>\n                    <div v-for=\"(member, index) in infoAboutGroup.members\" \n                        :class=\"{'member-enitity': member !== lastMember,'member-enitity-last': member === lastMember}\" :key=\"index\">\n                        <p>{{ member }}</p>\n                        <div v-if=\"infoAboutGroup.isCreator\">\n                            <button class=\"promote-member\" @click=\"promoteMember(member)\"/>\n                            <button class=\"demote-member\" @click=\"demoteMember(member)\" />\n                            <button class=\"remove-friend-button custom-button\" @click=\"removeMember(member)\" />\n                        </div>\n                    </div>\n                </div>\n                <div class=\"members-container\">\n                    <div class=\"info-social-header\">Invite</div>\n                    <div :class=\"{'member-enitity': member !== lastToInvite,'member-enitity-last': member === lastToInvite}\" v-for=\"(friend, index) in friendToInvite\" :key=\"index\">\n                        <p>{{ friend.name }}</p>\n                        <button class=\"invite-friend-button custom-button\" @click=\"inviteToGroup(friend.name)\" />\n                    </div>\n                </div>\n            </div>\n            <div v-if=\"infoAboutGroup.records.length === 0\">\n                <p>There are no records yet</p>\n            </div>\n            <div v-else>\n                <record-card v-for=\"(record, index) in infoAboutGroup.records\" :key=\"index\" :record=\"record\" />\n            </div>\n        </div>\n        <div v-if=\"!infoAboutGroup.isMember\">\n            <h1 class=\"not-your-friend\">You are not member of such group</h1>\n        </div>\n    </div>\n</template>\n\n<style scoped>\n\n.group-info-container{\n    display: flex;\n    flex-direction: column;\n    padding: 20px;\n}\n\n.members-container{\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    margin-top: 10px;\n    align-items: stretch;\n    border: 5px solid black;\n    border-radius: 5px;\n    background-color: white;\n    padding-left: 10px;\n    font-size: 1.2em;\n    padding-right: 10px;\n    max-height: 250px;\n    overflow-y: auto;\n    max-width: 40%;\n}\n\n.social-action-container{\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    justify-content: space-between;\n}\n\n.invite-friend-button{\n    background-image: url('../assets/svg/Social/sendgroupinvite.svg');\n    background-color: white;\n}\n\n.friend-info-header{\n    font-size: 24px;\n    font-weight: bold;\n    margin-bottom: 20px;\n}\n\n.not-your-friend{\n    font-size: 24px;\n    font-weight: bold;\n    margin-bottom: 20px;\n    text-align: center;\n}\n\n.member-enitity{\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1px solid black;\n    margin-top: 10px;\n    padding-left: 10px;\n    padding-right: 10px;\n}\n\n.member-enitity-last{\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border: none;\n    margin-top: 10px;\n    padding-left: 10px;\n    padding-right: 10px;\n}\n\n.info-header{\n    font-size: 1.2em;\n    font-family: 'Brush Script MT', cursive;\n    font-weight: bold;\n}\n\n.info-social-header{\n    font-size: 1.2em;\n    font-family: 'Brush Script MT', cursive;\n    font-weight: bold;\n    text-align: center;\n}\n\n.remove-friend-button{\n    background-image: url('../assets/svg/Profile/bin.svg');\n    background-color: white;\n    padding: 5px;\n    margin-left: 20px;\n    margin-right: 10px;\n}\n\n.custom-button{\n    background-position: center;\n    background-size:contain;\n    background-repeat: no-repeat;\n    border: none;\n    cursor: pointer;\n    height: 2em;\n    width: 2em;\n}\n\n@media (max-width: 600px) {\n    .member-enitity {\n        width: 70%;\n    }\n}\n\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}