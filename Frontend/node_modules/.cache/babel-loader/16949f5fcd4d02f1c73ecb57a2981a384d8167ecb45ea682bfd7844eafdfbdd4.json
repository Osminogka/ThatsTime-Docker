{"ast":null,"code":"import { ref, reactive, watch, onMounted } from 'vue';\nimport { useRoute } from 'vue-router';\nimport { getRecordsWithFriend } from '../core/userRecords';\nimport RecordCard from '@/view/RecordCard.vue';\nimport LoadingAnimation from '@/view/LoadingAnimation.vue';\nexport default {\n  __name: 'MoreFriend',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    import('../assets/css/loadingAnimation.css');\n    const route = useRoute();\n    const infoAboutFriend = reactive({\n      isFriend: true,\n      records: []\n    });\n    const error = ref(null);\n    const loading = ref(false);\n    const friendNickname = ref(route.params.nickname);\n    onMounted(async () => {\n      await fetchData();\n    });\n    watch(() => route.params.nickname, async nickname => {\n      friendNickname.value = nickname;\n      await fetchData();\n    });\n    async function fetchData() {\n      error.value = null;\n      loading.value = true;\n      try {\n        let newData = await new Promise((resolve, reject) => {\n          setTimeout(async () => {\n            try {\n              const data = await getRecordsWithFriend(route.params.nickname);\n              resolve(data);\n            } catch (e) {\n              reject(e);\n            }\n          }, 2000); // 2000 ms delay\n        });\n        // Clear the current object\n        for (let key in infoAboutFriend) {\n          delete infoAboutFriend[key];\n        }\n        // Add new properties\n        for (let key in newData) {\n          infoAboutFriend[key] = newData[key];\n        }\n      } catch (e) {\n        error.value = e;\n      } finally {\n        loading.value = false;\n      }\n    }\n    const __returned__ = {\n      route,\n      infoAboutFriend,\n      error,\n      loading,\n      friendNickname,\n      fetchData,\n      ref,\n      reactive,\n      watch,\n      onMounted,\n      get useRoute() {\n        return useRoute;\n      },\n      get getRecordsWithFriend() {\n        return getRecordsWithFriend;\n      },\n      RecordCard,\n      LoadingAnimation\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","reactive","watch","onMounted","useRoute","getRecordsWithFriend","RecordCard","LoadingAnimation","route","infoAboutFriend","isFriend","records","error","loading","friendNickname","params","nickname","fetchData","value","newData","Promise","resolve","reject","setTimeout","data","e","key"],"sources":["/home/osminogka/Desktop/Programming/ThatsTime/vueapp/src/components/MoreFriend.vue"],"sourcesContent":["<script setup>\nimport('../assets/css/loadingAnimation.css');\n\nimport { ref, reactive, watch, onMounted } from 'vue';\nimport { useRoute } from 'vue-router';\n\nimport { getRecordsWithFriend } from '../core/userRecords';\n\nimport RecordCard from '@/view/RecordCard.vue';\nimport LoadingAnimation from '@/view/LoadingAnimation.vue';\n\nconst route = useRoute();\n\nconst infoAboutFriend = reactive({\n    isFriend: true,\n    records: []\n});\nconst error = ref(null);\nconst loading = ref(false);\n\nconst friendNickname = ref(route.params.nickname);\n\nonMounted(async () => {\n    await fetchData();\n});\n\nwatch(() => route.params.nickname, async (nickname) =>{\n    friendNickname.value = nickname;\n    await fetchData();\n    }\n);\n\nasync function fetchData() {\n    error.value = null;\n    loading.value = true;\n    try{\n        let newData = await new Promise((resolve, reject) => {\n            setTimeout(async () => {\n                try {\n                    const data = await getRecordsWithFriend(route.params.nickname);\n                    resolve(data);\n                } catch (e) {\n                    reject(e);\n                }\n            }, 2000); // 2000 ms delay\n        });\n        // Clear the current object\n        for (let key in infoAboutFriend) {\n            delete infoAboutFriend[key];\n        }\n        // Add new properties\n        for (let key in newData) {\n            infoAboutFriend[key] = newData[key];\n        }\n    } catch (e) {\n        error.value = e;\n    }finally{\n        loading.value = false;\n    }\n}\n</script>\n\n<template>\n    <div v-if=\"error\">\n        <p>{{ error }}</p>\n    </div>\n    <loading-animation v-else-if=\"loading\" />\n    <div v-else-if=\"infoAboutFriend.isFriend\">\n        <div class=\"friend-info-header\">{{ route.params.nickname }}</div>\n        <div v-if=\"infoAboutFriend.records.length === 0\">\n            <p>There are no records yet</p>\n        </div>\n        <div v-else>\n            <record-card v-for=\"(record, index) in infoAboutFriend.records\" :key=\"index\" :record=\"record\" />\n        </div>\n    </div>\n    <div v-if=\"!infoAboutFriend.isFriend\">\n        <h1 class=\"not-your-friend\">You don't have such friend</h1>\n    </div>\n</template>\n\n<style scoped>\n\n.friend-info-header{\n    font-size: 24px;\n    font-weight: bold;\n    margin-bottom: 20px;\n}\n\n.not-your-friend{\n    font-size: 24px;\n    font-weight: bold;\n    margin-bottom: 20px;\n    text-align: center;\n}\n\n</style>"],"mappings":"AAGA,SAASA,GAAG,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,SAAS,QAAQ,KAAK;AACrD,SAASC,QAAQ,QAAQ,YAAY;AAErC,SAASC,oBAAoB,QAAQ,qBAAqB;AAE1D,OAAOC,UAAU,MAAM,uBAAuB;AAC9C,OAAOC,gBAAgB,MAAM,6BAA6B;;;;;;;IAR1D,MAAM,CAAC,oCAAoC,CAAC;IAU5C,MAAMC,KAAK,GAAGJ,QAAQ,CAAC,CAAC;IAExB,MAAMK,eAAe,GAAGR,QAAQ,CAAC;MAC7BS,QAAQ,EAAE,IAAI;MACdC,OAAO,EAAE;IACb,CAAC,CAAC;IACF,MAAMC,KAAK,GAAGZ,GAAG,CAAC,IAAI,CAAC;IACvB,MAAMa,OAAO,GAAGb,GAAG,CAAC,KAAK,CAAC;IAE1B,MAAMc,cAAc,GAAGd,GAAG,CAACQ,KAAK,CAACO,MAAM,CAACC,QAAQ,CAAC;IAEjDb,SAAS,CAAC,YAAY;MAClB,MAAMc,SAAS,CAAC,CAAC;IACrB,CAAC,CAAC;IAEFf,KAAK,CAAC,MAAMM,KAAK,CAACO,MAAM,CAACC,QAAQ,EAAE,MAAOA,QAAQ,IAAI;MAClDF,cAAc,CAACI,KAAK,GAAGF,QAAQ;MAC/B,MAAMC,SAAS,CAAC,CAAC;IACjB,CACJ,CAAC;IAED,eAAeA,SAASA,CAAA,EAAG;MACvBL,KAAK,CAACM,KAAK,GAAG,IAAI;MAClBL,OAAO,CAACK,KAAK,GAAG,IAAI;MACpB,IAAG;QACC,IAAIC,OAAO,GAAG,MAAM,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;UACjDC,UAAU,CAAC,YAAY;YACnB,IAAI;cACA,MAAMC,IAAI,GAAG,MAAMnB,oBAAoB,CAACG,KAAK,CAACO,MAAM,CAACC,QAAQ,CAAC;cAC9DK,OAAO,CAACG,IAAI,CAAC;YACjB,CAAC,CAAC,OAAOC,CAAC,EAAE;cACRH,MAAM,CAACG,CAAC,CAAC;YACb;UACJ,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC;QACd,CAAC,CAAC;QACF;QACA,KAAK,IAAIC,GAAG,IAAIjB,eAAe,EAAE;UAC7B,OAAOA,eAAe,CAACiB,GAAG,CAAC;QAC/B;QACA;QACA,KAAK,IAAIA,GAAG,IAAIP,OAAO,EAAE;UACrBV,eAAe,CAACiB,GAAG,CAAC,GAAGP,OAAO,CAACO,GAAG,CAAC;QACvC;MACJ,CAAC,CAAC,OAAOD,CAAC,EAAE;QACRb,KAAK,CAACM,KAAK,GAAGO,CAAC;MACnB,CAAC,SAAO;QACJZ,OAAO,CAACK,KAAK,GAAG,KAAK;MACzB;IACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}