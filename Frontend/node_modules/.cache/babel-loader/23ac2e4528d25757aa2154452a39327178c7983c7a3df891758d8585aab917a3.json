{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createBlock as _createBlock, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-f42b29ac\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"group-info-container\"\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  key: 2\n};\nconst _hoisted_4 = {\n  class: \"friend-info-header\"\n};\nconst _hoisted_5 = {\n  class: \"info-header\"\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"info-header\"\n}, \"Members\", -1 /* HOISTED */));\nconst _hoisted_7 = {\n  class: \"members-container\"\n};\nconst _hoisted_8 = {\n  key: 0\n};\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = [\"onClick\"];\nconst _hoisted_11 = [\"onClick\"];\nconst _hoisted_12 = {\n  class: \"members-container\"\n};\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = {\n  key: 0\n};\nconst _hoisted_15 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"There are no records yet\", -1 /* HOISTED */));\nconst _hoisted_16 = [_hoisted_15];\nconst _hoisted_17 = {\n  key: 1\n};\nconst _hoisted_18 = {\n  key: 3\n};\nconst _hoisted_19 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", {\n  class: \"not-your-friend\"\n}, \"You are not member of such group\", -1 /* HOISTED */));\nconst _hoisted_20 = [_hoisted_19];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$setup.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"p\", null, _toDisplayString($setup.error), 1 /* TEXT */)])) : $setup.loading ? (_openBlock(), _createBlock($setup[\"LoadingAnimation\"], {\n    key: 1\n  })) : $setup.infoAboutGroup.isMember ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, _toDisplayString($setup.route.params.groupname), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_5, \"Created by: \" + _toDisplayString($setup.infoAboutGroup.Creator), 1 /* TEXT */), _hoisted_6, _createElementVNode(\"div\", _hoisted_7, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.infoAboutGroup.members, (member, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: _normalizeClass({\n        'member-enitity': member !== $setup.lastMember,\n        'member-enitity-last': member === $setup.lastMember\n      }),\n      key: index\n    }, [_createElementVNode(\"p\", null, _toDisplayString(member), 1 /* TEXT */), $setup.infoAboutGroup.isCreator ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createElementVNode(\"button\", {\n      class: \"remove-friend-button custom-button\",\n      onClick: $event => $setup.removeMember(member)\n    }, null, 8 /* PROPS */, _hoisted_9), _createElementVNode(\"button\", {\n      class: \"promote-member\",\n      onClick: $event => $setup.promoteMember(member)\n    }, null, 8 /* PROPS */, _hoisted_10), _createElementVNode(\"button\", {\n      class: \"demote-member\",\n      onClick: $event => $setup.demoteMember(member)\n    }, null, 8 /* PROPS */, _hoisted_11)])) : _createCommentVNode(\"v-if\", true)], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_12, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.friendToInvite, (friend, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: _normalizeClass({\n        'member-enitity': _ctx.member !== $setup.lastMember,\n        'member-enitity-last': _ctx.member === $setup.lastMember\n      }),\n      key: index\n    }, [_createElementVNode(\"p\", null, _toDisplayString(friend.name), 1 /* TEXT */), _createElementVNode(\"button\", {\n      class: \"invite-friend-button custom-button\",\n      onClick: $event => $setup.inviteToGroup(friend.name)\n    }, null, 8 /* PROPS */, _hoisted_13)], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */))]), $setup.infoAboutGroup.records.length === 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [..._hoisted_16])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_17, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.infoAboutGroup.records, (record, index) => {\n    return _openBlock(), _createBlock($setup[\"RecordCard\"], {\n      key: index,\n      record: record\n    }, null, 8 /* PROPS */, [\"record\"]);\n  }), 128 /* KEYED_FRAGMENT */))]))])) : _createCommentVNode(\"v-if\", true), !$setup.infoAboutGroup.isMember ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [..._hoisted_20])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","key","_createElementVNode","_hoisted_15","_hoisted_19","_createElementBlock","_hoisted_1","$setup","error","_hoisted_2","_toDisplayString","loading","_createBlock","infoAboutGroup","isMember","_hoisted_3","_hoisted_4","route","params","groupname","_hoisted_5","Creator","_hoisted_6","_hoisted_7","_Fragment","_renderList","members","member","index","_normalizeClass","lastMember","isCreator","_hoisted_8","onClick","$event","removeMember","_hoisted_9","promoteMember","_hoisted_10","demoteMember","_hoisted_11","_createCommentVNode","_hoisted_12","friendToInvite","friend","_ctx","name","inviteToGroup","_hoisted_13","records","length","_hoisted_14","_hoisted_16","_hoisted_17","record","_hoisted_18","_hoisted_20"],"sources":["/home/osminogka/Desktop/Programming/ThatsTime/vueapp/src/components/MoreGroup.vue"],"sourcesContent":["<script setup>\nimport('../assets/css/loadingAnimation.css');\n\nimport { ref, reactive, watch, onMounted, computed } from 'vue';\nimport { useRoute } from 'vue-router';\n\nimport { getRecordsWithGroup } from '../core/userRecords';\n\nimport RecordCard from '@/view/RecordCard.vue';\nimport LoadingAnimation from '@/view/LoadingAnimation.vue';\nimport { friendList } from '@/core/userInfo';\nimport { inviteFriendToGroup, removeMemberFromGroup, promoteMemberInGroup, demoteMemberInGroup } from '../core/groupInfo'\n\nconst route = useRoute();\n\nconst infoAboutGroup = reactive({\n    isMember: true,\n    isCreator: false,\n    Creator: '',\n    members: [],\n    records: []\n});\nconst error = ref(null);\nconst loading = ref(false);\n\nconst groupName = ref(route.params.groupname);\n\nonMounted(async () => {\n    await fetchData();\n});\n\nwatch(() => route.params.groupname, async (groupname) =>{\n    groupName.value = groupname;\n    await fetchData();\n    }\n);\n\nasync function fetchData() {\n    error.value = null;\n    loading.value = true;\n    try{\n        let newData = await getRecordsWithGroup(route.params.groupname);\n\n        // Clear the current object\n        for (let key in infoAboutGroup) {\n            delete infoAboutGroup[key];\n        }\n        // Add new properties\n        for (let key in newData) {\n            infoAboutGroup[key] = newData[key];\n        }\n    } catch (e) {\n        error.value = e;\n    }finally{\n        loading.value = false;\n    }\n}\n\nconst lastMember = computed(() => infoAboutGroup.members[infoAboutGroup.members.length - 1]);\n\nconst friendToInvite = ref([...friendList.value])\n\nconst lastToInvite = computed(() => friendToInvite.value[infoAboutGroup.members.length - 1].name);\n\nasync function removeMember(memberName){\n    await removeMemberFromGroup(memberName);\n}\n\nasync function inviteToGroup(friendName){\n    await inviteFriendToGroup(friendName);\n    friendToInvite.value = friendToInvite.value.filter(friend => friend.name !== friendName);\n}\n\nasync function promoteMember(memberName){\n    await promoteMemberInGroup(memberName);\n}\n\nasync function demoteMember(memberName){\n    await demoteMemberInGroup(memberName);\n}\n</script>\n\n<template>\n    <div class=\"group-info-container\">\n        <div v-if=\"error\">\n            <p>{{ error }}</p>\n        </div>\n        <loading-animation v-else-if=\"loading\" />\n        <div v-else-if=\"infoAboutGroup.isMember\">\n            <div class=\"friend-info-header\">{{ route.params.groupname }}</div>\n            <div class=\"info-header\">Created by: {{ infoAboutGroup.Creator }}</div>\n            <div class=\"info-header\">Members</div>\n            <div class=\"members-container\">\n                <div v-for=\"(member, index) in infoAboutGroup.members\" \n                    :class=\"{'member-enitity': member !== lastMember,'member-enitity-last': member === lastMember}\" :key=\"index\">\n                    <p>{{ member }}</p>\n                    <div v-if=\"infoAboutGroup.isCreator\">\n                        <button class=\"remove-friend-button custom-button\" @click=\"removeMember(member)\" />\n                        <button class=\"promote-member\" @click=\"promoteMember(member)\"/>\n                        <button class=\"demote-member\" @click=\"demoteMember(member)\" />\n                    </div>\n                </div>\n            </div>\n            <div class=\"members-container\">\n                <div :class=\"{'member-enitity': member !== lastMember,'member-enitity-last': member === lastMember}\" v-for=\"(friend, index) in friendToInvite\" :key=\"index\">\n                    <p>{{ friend.name }}</p>\n                    <button class=\"invite-friend-button custom-button\" @click=\"inviteToGroup(friend.name)\" />\n                </div>\n            </div>\n            <div v-if=\"infoAboutGroup.records.length === 0\">\n                <p>There are no records yet</p>\n            </div>\n            <div v-else>\n                <record-card v-for=\"(record, index) in infoAboutGroup.records\" :key=\"index\" :record=\"record\" />\n            </div>\n        </div>\n        <div v-if=\"!infoAboutGroup.isMember\">\n            <h1 class=\"not-your-friend\">You are not member of such group</h1>\n        </div>\n    </div>\n</template>\n\n<style scoped>\n\n.group-info-container{\n    display: flex;\n    flex-direction: column;\n    padding: 20px;\n}\n\n.members-container{\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    margin-top: 10px;\n    align-items: stretch;\n    border: 5px solid black;\n    border-radius: 5px;\n    background-color: white;\n    padding-left: 10px;\n    font-size: 1.2em;\n    padding-right: 10px;\n    max-height: 250px;\n    overflow-y: auto;\n    max-width: 70%;\n}\n\n.invite-friend-button{\n    background-image: url('../assets/svg/Social/sendgroupinvite.svg');\n    background-color: white;\n}\n\n.friend-info-header{\n    font-size: 24px;\n    font-weight: bold;\n    margin-bottom: 20px;\n}\n\n.not-your-friend{\n    font-size: 24px;\n    font-weight: bold;\n    margin-bottom: 20px;\n    text-align: center;\n}\n\n.member-enitity{\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border-bottom: 1px solid black;\n    margin-top: 10px;\n    padding-left: 10px;\n    padding-right: 10px;\n}\n\n.member-enitity-last{\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    border: none;\n    margin-top: 10px;\n    padding-left: 10px;\n    padding-right: 10px;\n}\n\n.info-header{\n    font-size: 1.2em;\n    font-family: 'Brush Script MT', cursive;\n    font-weight: bold;\n}\n\n.remove-friend-button{\n    background-image: url('../assets/svg/Profile/bin.svg');\n    background-color: white;\n    padding: 5px;\n    margin-left: 20px;\n    margin-right: 10px;\n}\n\n.custom-button{\n    background-position: center;\n    background-size:contain;\n    background-repeat: no-repeat;\n    border: none;\n    cursor: pointer;\n    height: 2em;\n    width: 2em;\n}\n\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}